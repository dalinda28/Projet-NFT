<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NFTS ECV</title>
</head>
<style>
    .hidden {
        display: none;
    }
</style>

<body>
    <ul class="list"></ul>
</body>
<script type="text/javascript">
    const root = document.querySelector('body');

    async function nft() {
        try {

            const token = 'YTIxYzkyZjktNTI5ZC00ZTVmLTkyNzgtNjBhMjY4YmExOTdl';
            const url = 'https://awesome-nft-app.herokuapp.com/';

            fetch(url)
                .then((resp) => resp.json())
                .then(function (data) {
                    let nfts = data.assets;
                    nfts = nfts.filter(function (val) {
                        return val.creator.username != '';
                    })
                    const tab = nfts.map(x => x.collection.name);
                    createCards(nfts);
                    clickHandle(event, nfts);
                })
                .catch(function (error) {
                    console.log(error);
                });

        } catch (e) {
            console.log(e);
        }
    }


    function createElement(tag, config, parent = null) {
        const {
            text,
            color,
            href,
            creator
        } = config || {};

        const element = document.createElement(tag);

        if (href) {
            element.href = href;
        }
        if (color) {
            element.style.color = color;
        }
        if (text) {
            element.innerHTML = text;
        }
        if (!parent) {
            root.appendChild(element);
        } else {
            parent.appendChild(element);
        }
        return element;
    }

    const myDiv = createElement('div');

    function clickHandle(event) {
        let CreatorElement = Array.from(document.getElementsByClassName('hidden'));
    }

    function createCards(data) {
        data.forEach(el => {
            myElement = createElement('div', {});
            myElement.setAttribute('id', `${el.creator.username}`);
            myElement.setAttribute('class', 'hidden');

            myA = createElement('a', {
                href: `/${el.collection.slug}`,
            }, myElement);

            myImg = createElement('img', {}, myElement);
            myImg.src = el.image_url;

            createElement('h2', {
                text: el.collection.name,
            }, myElement);

            createElement('p', {
                class: `${el.id}`,
                text: `by ${el.creator.username}`,
                href: `${el.creator.username}`,
            }, myElement);

            myProfilImg = createElement('img', {}, myElement);
            myProfilImg.src = el.creator.profile_url;

            price = createElement('span', {
                text: el.sales
            }, myElement)

            const $input = `<input type="checkbox" id="${el.id}" name="${el.id}" value="${el.creator.username}" checked ><label for="${el.creator.username}">${el.creator.username}</label> <br>`
            document.querySelector(".list").insertAdjacentHTML("beforeend", $input)

            createCard(el);
        })
    }



    function createCard(card) {
        createElement('p', {
            text: card.description,
        }, myElement)
    }

    nft();

    //Adding an event listener to the document element.
    document.documentElement.addEventListener('click', clickHandle, false);

</script>

</html>