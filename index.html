<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/node_modules/@picocss/pico/css/pico.min.css">
    <title>NonFungible.com</title>
    <link rel="icon" type="image/png" sizes="16x16" href="./NFT_Icon.png">
    <link href="style.css" rel="stylesheet">
</head>

<body class="home">
</body>
<script src="main.js"></script>
<script type="text/javascript">
    // crÃ©ation de la div parente
    const myDiv = createElement('div', {
        display: 'flex',
        flexFlow: 'wrap',
        placeContent: 'space-evenly',
        placeholder: 'Rechercher un nft'
    });
    // titre de la page
    const titre = createElement('h1', {
        width: '100%',
        margin: '50px auto 0px',
        textAlign: 'center',
        text: 'Welcome to NonFungible website'
    }, myDiv)

    const searchBox = createElement('div', {
        display: 'flex',
        placeContent: 'center',
        margin: '50px 0 0'
    });
    
    // Sort the creator
    const myListOfcreator = createElement('select', {
        width: '25%',
    }, searchBox);

    const items = document.getElementsByTagName('article');
    const sales = document.getElementsByClassName('sales');

    //It's a function that is called when the user change the value of the select of cretaor.
    myListOfcreator.addEventListener('change', e => {
        input = e.target.value;
        var pat = new RegExp(input, 'i');
        for (var i = 0; i < items.length; i++) {
            var item = items[i];
            if (pat.test(item.innerText)) {
                item.classList.remove("hidden");
            } else if (input == 'All creators') {
                item.classList.remove("hidden");
            } else {
                item.classList.add("hidden");
            }
        }
    });

    // Sort the sales
    const myListOfSales = createElement('select', {
        width: '15%',
        margin: '0 20px 20px'
    }, searchBox);

    //It's a function that is called when the user change the value of the select of Sales.
    myListOfSales.addEventListener('change', e => {
        input = e.target.value;
        let pat = new RegExp(`^${input}$`, 'i');
        for (let i = 0; i < sales.length; i++) {
            let sale = sales[i];
            sale.parentNode.classList.remove("hidden");
            if (pat.test(sale.innerText)) {
                sale.parentNode.classList.remove("hidden");
            } else if (input == 'All sales') {
                sale.parentNode.classList.remove("hidden");
            } else {
                sale.parentNode.classList.add("hidden");
            }
        }
    });


    // Searchbox
    let mySelectNameNft = []

    const myInput = createElement('input', {
        identifiant: 'search',
        display: 'flex',
        width: '40%',
        placeholder: "Search by NFT name or creator"
    }, searchBox);

    const articles = document.getElementsByTagName('article');
    //It's a function that is called when the user change the value of the innput of the Searchbar
    myInput.addEventListener('keyup', e => {
        const searchString = e.target.value;
        var pat = new RegExp(searchString, 'i');

        const filteredNfts = mySelectNameNft.filter((character) => {
            return (
                character.includes(searchString)
            );
        });
        for (var i = 0; i < articles.length; i++) {
            var item = articles[i];
            if (pat.test(item.innerText)) {
                item.classList.remove("hidden");
            } else {
                item.classList.add("hidden");
            }
        }
    });

    nfts();
</script>

</html>